<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DataInitializer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Hotel Booking System</a> &gt; <a href="index.source.html" class="el_package">com.hotel.config</a> &gt; <span class="el_source">DataInitializer.java</span></div><h1>DataInitializer.java</h1><pre class="source lang-java linenums">package com.hotel.config;

import com.hotel.model.Hotel;
import com.hotel.model.Room;
import com.hotel.model.User;
import com.hotel.repository.HotelRepository;
import com.hotel.repository.RoomRepository;
import com.hotel.repository.UserRepository;
import com.hotel.util.SimplePasswordEncoder;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

import java.util.Arrays;
import java.util.List;

@Component
<span class="fc" id="L20">public class DataInitializer implements CommandLineRunner {</span>
    
<span class="fc" id="L22">    private static final Logger logger = LoggerFactory.getLogger(DataInitializer.class);</span>
    
    @Autowired
    private UserRepository userRepository;
    
    @Autowired
    private HotelRepository hotelRepository;
    
    @Autowired
    private RoomRepository roomRepository;
    
    @Autowired
    private SimplePasswordEncoder passwordEncoder;
    
    @Override
    public void run(String... args) throws Exception {
<span class="fc" id="L38">        logger.info(&quot;=== DataInitializer started ===&quot;);</span>
        
        // Create sample users
<span class="fc" id="L41">        createUsers();</span>
        
        // Create sample hotels
<span class="fc" id="L44">        createHotels();</span>
        
        // Create rooms for hotels
<span class="fc" id="L47">        createRoomsForHotels();</span>
        
<span class="fc" id="L49">        logger.info(&quot;=== DataInitializer completed ===&quot;);</span>
<span class="fc" id="L50">        logger.info(&quot;Total users: {}&quot;, userRepository.count());</span>
<span class="fc" id="L51">        logger.info(&quot;Total hotels: {}&quot;, hotelRepository.count());</span>
<span class="fc" id="L52">        logger.info(&quot;Total rooms: {}&quot;, roomRepository.count());</span>
<span class="fc" id="L53">    }</span>

    private void createUsers() {
<span class="pc bpc" id="L56" title="1 of 2 branches missed.">        if (userRepository.count() == 0) {</span>
<span class="fc" id="L57">            logger.info(&quot;Creating sample users...&quot;);</span>
            
<span class="fc" id="L59">            User admin = new User();</span>
<span class="fc" id="L60">            admin.setUsername(&quot;admin&quot;);</span>
<span class="fc" id="L61">            admin.setPassword(passwordEncoder.encode(&quot;admin123&quot;));</span>
<span class="fc" id="L62">            admin.setEmail(&quot;admin@hotel.com&quot;);</span>
<span class="fc" id="L63">            admin.setFirstName(&quot;System&quot;);</span>
<span class="fc" id="L64">            admin.setLastName(&quot;Administrator&quot;);</span>
<span class="fc" id="L65">            admin.setPhone(&quot;+1234567890&quot;);</span>
<span class="fc" id="L66">            admin.setAddress(&quot;Hotel Management System&quot;);</span>
<span class="fc" id="L67">            userRepository.save(admin);</span>
            
<span class="fc" id="L69">            User john = new User();</span>
<span class="fc" id="L70">            john.setUsername(&quot;john_doe&quot;);</span>
<span class="fc" id="L71">            john.setPassword(passwordEncoder.encode(&quot;password123&quot;));</span>
<span class="fc" id="L72">            john.setEmail(&quot;john.doe@email.com&quot;);</span>
<span class="fc" id="L73">            john.setFirstName(&quot;John&quot;);</span>
<span class="fc" id="L74">            john.setLastName(&quot;Doe&quot;);</span>
<span class="fc" id="L75">            john.setPhone(&quot;+1987654321&quot;);</span>
<span class="fc" id="L76">            john.setAddress(&quot;123 Main St, New York, NY&quot;);</span>
<span class="fc" id="L77">            userRepository.save(john);</span>

<span class="fc" id="L79">            User sarah = new User();</span>
<span class="fc" id="L80">            sarah.setUsername(&quot;sarah_williams&quot;);</span>
<span class="fc" id="L81">            sarah.setPassword(passwordEncoder.encode(&quot;sarah123&quot;));</span>
<span class="fc" id="L82">            sarah.setEmail(&quot;sarah.williams@email.com&quot;);</span>
<span class="fc" id="L83">            sarah.setFirstName(&quot;Sarah&quot;);</span>
<span class="fc" id="L84">            sarah.setLastName(&quot;Williams&quot;);</span>
<span class="fc" id="L85">            sarah.setPhone(&quot;+1654321890&quot;);</span>
<span class="fc" id="L86">            sarah.setAddress(&quot;456 Park Ave, Los Angeles, CA&quot;);</span>
<span class="fc" id="L87">            userRepository.save(sarah);</span>
            
<span class="fc" id="L89">            logger.info(&quot;Created {} users&quot;, userRepository.count());</span>
<span class="fc" id="L90">        } else {</span>
<span class="nc" id="L91">            logger.info(&quot;Users already exist, skipping user creation&quot;);</span>
        }
<span class="fc" id="L93">    }</span>

    private void createHotels() {
<span class="pc bpc" id="L96" title="1 of 2 branches missed.">        if (hotelRepository.count() == 0) {</span>
<span class="fc" id="L97">            logger.info(&quot;Creating sample hotels...&quot;);</span>
            
            try {
                // Hotel 1: Luxury Beach Resort
<span class="fc" id="L101">                Hotel hotel1 = createHotel(</span>
                    &quot;Grand Marina Resort&quot;,
                    &quot;Experience luxury at its finest with our beachfront resort featuring world-class amenities, spa services, and gourmet dining. Perfect for romantic getaways and family vacations.&quot;,
                    &quot;123 Ocean Drive, Miami Beach&quot;,
                    &quot;Miami&quot;, &quot;USA&quot;, &quot;+1-305-123-4567&quot;, &quot;info@grandmarina.com&quot;,
                    &quot;https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L107">                    4.8, 5</span>
                );
                
                // Hotel 2: Business Hotel
<span class="fc" id="L111">                Hotel hotel2 = createHotel(</span>
                    &quot;Metropolitan Suites&quot;,
                    &quot;Perfect for business travelers, our downtown hotel offers modern amenities, conference facilities, and easy access to business districts. Free high-speed WiFi and business center.&quot;,
                    &quot;456 Business Avenue, Manhattan&quot;,
                    &quot;New York&quot;, &quot;USA&quot;, &quot;+1-212-987-6543&quot;, &quot;reservations@metropolitansuites.com&quot;,
                    &quot;https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L117">                    4.5, 4</span>
                );
                
                // REPLACEMENT HOTEL: Luxury City Hotel instead of Alpine Mountain Lodge
<span class="fc" id="L121">                Hotel hotel3 = createHotel(</span>
                    &quot;Royal Plaza Hotel&quot;,
                    &quot;Experience urban luxury in the heart of the city with sophisticated accommodations, fine dining, and premium services for the discerning traveler.&quot;,
                    &quot;789 Central Boulevard, Chicago&quot;,
                    &quot;Chicago&quot;, &quot;USA&quot;, &quot;+1-312-555-7890&quot;, &quot;reservations@royalplaza.com&quot;,
                    &quot;https://images.unsplash.com/photo-1584132967334-10e028bd69f7?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L127">                    4.6, 5</span>
                );

                // Hotel 4: Urban Boutique Hotel
<span class="fc" id="L131">                Hotel hotel4 = createHotel(</span>
                    &quot;The Urban Boutique&quot;,
                    &quot;A stylish boutique hotel in the heart of the city featuring contemporary design, art exhibitions, and a rooftop bar with panoramic city views.&quot;,
                    &quot;321 Arts District, San Francisco&quot;,
                    &quot;San Francisco&quot;, &quot;USA&quot;, &quot;+1-415-555-0123&quot;, &quot;hello@urbanboutique.com&quot;,
                    &quot;https://images.unsplash.com/photo-1586375300773-8384e3e4916f?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L137">                    4.6, 4</span>
                );

                // Hotel 5: Luxury Desert Resort
<span class="fc" id="L141">                Hotel hotel5 = createHotel(</span>
                    &quot;Oasis Desert Resort&quot;,
                    &quot;An exclusive desert retreat featuring private villas, infinity pools, spa treatments, and stunning desert landscapes. Perfect for wellness retreats.&quot;,
                    &quot;555 Desert Oasis Road, Scottsdale&quot;,
                    &quot;Scottsdale&quot;, &quot;USA&quot;, &quot;+1-480-777-8888&quot;, &quot;reservations@oasisresort.com&quot;,
                    &quot;https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L147">                    4.9, 5</span>
                );

                // Hotel 6: Historic City Hotel
<span class="fc" id="L151">                Hotel hotel6 = createHotel(</span>
                    &quot;The Grand Heritage&quot;,
                    &quot;A beautifully restored historic hotel offering classic elegance with modern comforts. Located in the historic district with period architecture.&quot;,
                    &quot;888 Heritage Square, Boston&quot;,
                    &quot;Boston&quot;, &quot;USA&quot;, &quot;+1-617-444-5555&quot;, &quot;info@grandheritage.com&quot;,
                    &quot;https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L157">                    4.7, 5</span>
                );

                // Hotel 7: Beachfront Paradise
<span class="fc" id="L161">                Hotel hotel7 = createHotel(</span>
                    &quot;Paradise Beach Resort&quot;,
                    &quot;Direct beach access, water sports, multiple pools, and tropical gardens. Family-friendly resort with kids club and entertainment.&quot;,
                    &quot;777 Beach Boulevard, Honolulu&quot;,
                    &quot;Honolulu&quot;, &quot;USA&quot;, &quot;+1-808-222-3333&quot;, &quot;aloha@paradiseresort.com&quot;,
                    &quot;https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L167">                    4.8, 4</span>
                );

                // Hotel 8: Modern Business Hotel
<span class="fc" id="L171">                Hotel hotel8 = createHotel(</span>
                    &quot;Tech Tower Hotel&quot;,
                    &quot;Ultra-modern hotel designed for tech professionals featuring smart rooms, coworking spaces, and high-tech meeting facilities.&quot;,
                    &quot;444 Innovation Drive, Seattle&quot;,
                    &quot;Seattle&quot;, &quot;USA&quot;, &quot;+1-206-777-9999&quot;, &quot;stay@techtower.com&quot;,
                    &quot;https://images.unsplash.com/photo-1564501049412-61c2a3083791?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L177">                    4.4, 4</span>
                );

                // Hotel 9: Romantic Getaway
<span class="fc" id="L181">                Hotel hotel9 = createHotel(</span>
                    &quot;Serenity Retreat&quot;,
                    &quot;Intimate adults-only resort offering privacy, luxury suites with private pools, and personalized service for romantic escapes.&quot;,
                    &quot;222 Lovers Lane, Napa Valley&quot;,
                    &quot;Napa&quot;, &quot;USA&quot;, &quot;+1-707-333-4444&quot;, &quot;romance@serenityretreat.com&quot;,
                    &quot;https://images.unsplash.com/photo-1522798514-97ceb8c4f1c8?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L187">                    4.9, 5</span>
                );

                // Hotel 10: Family Resort
<span class="fc" id="L191">                Hotel hotel10 = createHotel(</span>
                    &quot;Family Fun Resort&quot;,
                    &quot;The ultimate family destination with water parks, kids activities, family suites, and all-inclusive dining options.&quot;,
                    &quot;999 Family Avenue, Orlando&quot;,
                    &quot;Orlando&quot;, &quot;USA&quot;, &quot;+1-407-888-0000&quot;, &quot;fun@familyresort.com&quot;,
                    &quot;https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=1200&amp;q=80&quot;,
<span class="fc" id="L197">                    4.6, 4</span>
                );

                // Save all hotels
<span class="fc" id="L201">                hotelRepository.saveAll(Arrays.asList(hotel1, hotel2, hotel3, hotel4, hotel5, </span>
                                                     hotel6, hotel7, hotel8, hotel9, hotel10));
                
<span class="fc" id="L204">                logger.info(&quot;Successfully created {} hotels&quot;, hotelRepository.count());</span>
                
<span class="nc" id="L206">            } catch (Exception e) {</span>
<span class="nc" id="L207">                logger.error(&quot;Error creating hotels: &quot;, e);</span>
<span class="pc" id="L208">            }</span>
        } else {
<span class="nc" id="L210">            logger.info(&quot;Hotels already exist, skipping hotel creation. Current count: {}&quot;, hotelRepository.count());</span>
        }
<span class="fc" id="L212">    }</span>

    private Hotel createHotel(String name, String description, String address, String city, 
                             String country, String phone, String email, String imageUrl, 
                             Double rating, Integer starRating) {
<span class="fc" id="L217">        Hotel hotel = new Hotel();</span>
<span class="fc" id="L218">        hotel.setName(name);</span>
<span class="fc" id="L219">        hotel.setDescription(description);</span>
<span class="fc" id="L220">        hotel.setAddress(address);</span>
<span class="fc" id="L221">        hotel.setCity(city);</span>
<span class="fc" id="L222">        hotel.setCountry(country);</span>
<span class="fc" id="L223">        hotel.setPhone(phone);</span>
<span class="fc" id="L224">        hotel.setEmail(email);</span>
<span class="fc" id="L225">        hotel.setImageUrl(imageUrl);</span>
<span class="fc" id="L226">        hotel.setRating(rating);</span>
<span class="fc" id="L227">        hotel.setStarRating(starRating);</span>
<span class="fc" id="L228">        return hotel;</span>
    }

    private void createRoomsForHotels() {
<span class="pc bpc" id="L232" title="1 of 2 branches missed.">        if (roomRepository.count() == 0) {</span>
<span class="fc" id="L233">            logger.info(&quot;Creating rooms for hotels...&quot;);</span>
            
            try {
<span class="fc" id="L236">                List&lt;Hotel&gt; hotels = hotelRepository.findAll();</span>
<span class="fc" id="L237">                logger.info(&quot;Found {} hotels to create rooms for&quot;, hotels.size());</span>
                
<span class="fc bfc" id="L239" title="All 2 branches covered.">                for (Hotel hotel : hotels) {</span>
<span class="fc" id="L240">                    logger.info(&quot;Creating rooms for hotel: {}&quot;, hotel.getName());</span>
                    
                    // Create simple rooms first to avoid complex logic errors
<span class="fc" id="L243">                    createSimpleRooms(hotel);</span>
<span class="fc" id="L244">                }</span>
                
<span class="fc" id="L246">                logger.info(&quot;Successfully created rooms for all hotels&quot;);</span>
                
<span class="nc" id="L248">            } catch (Exception e) {</span>
<span class="nc" id="L249">                logger.error(&quot;Error creating rooms: &quot;, e);</span>
<span class="pc" id="L250">            }</span>
        } else {
<span class="nc" id="L252">            logger.info(&quot;Rooms already exist, skipping room creation&quot;);</span>
        }
<span class="fc" id="L254">    }</span>

    private void createSimpleRooms(Hotel hotel) {
        try {
            // Create 2-3 simple rooms per hotel
<span class="fc" id="L259">            Room room1 = new Room();</span>
<span class="fc" id="L260">            room1.setRoomNumber(&quot;101&quot;);</span>
<span class="fc" id="L261">            room1.setType(&quot;Standard Room&quot;);</span>
<span class="fc" id="L262">            room1.setPrice(199.00);</span>
<span class="fc" id="L263">            room1.setDescription(&quot;Comfortable standard room with all basic amenities&quot;);</span>
<span class="fc" id="L264">            room1.setCapacity(2);</span>
<span class="fc" id="L265">            room1.setAvailable(true);</span>
<span class="fc" id="L266">            room1.setAmenities(&quot;WiFi,TV,AC&quot;);</span>
<span class="fc" id="L267">            room1.setImageUrl(&quot;https://images.unsplash.com/photo-1631049307264-da0ec9d70304?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=80&quot;);</span>
<span class="fc" id="L268">            room1.setHotel(hotel);</span>
            
<span class="fc" id="L270">            Room room2 = new Room();</span>
<span class="fc" id="L271">            room2.setRoomNumber(&quot;102&quot;);</span>
<span class="fc" id="L272">            room2.setType(&quot;Deluxe Room&quot;);</span>
<span class="fc" id="L273">            room2.setPrice(299.00);</span>
<span class="fc" id="L274">            room2.setDescription(&quot;Spacious deluxe room with premium amenities&quot;);</span>
<span class="fc" id="L275">            room2.setCapacity(2);</span>
<span class="fc" id="L276">            room2.setAvailable(true);</span>
<span class="fc" id="L277">            room2.setAmenities(&quot;WiFi,TV,Minibar,AC&quot;);</span>
<span class="fc" id="L278">            room2.setImageUrl(&quot;https://images.unsplash.com/photo-1590490360182-c33d57733427?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=80&quot;);</span>
<span class="fc" id="L279">            room2.setHotel(hotel);</span>
            
<span class="fc" id="L281">            Room room3 = new Room();</span>
<span class="fc" id="L282">            room3.setRoomNumber(&quot;201&quot;);</span>
<span class="fc" id="L283">            room3.setType(&quot;Suite&quot;);</span>
<span class="fc" id="L284">            room3.setPrice(499.00);</span>
<span class="fc" id="L285">            room3.setDescription(&quot;Luxurious suite with separate living area&quot;);</span>
<span class="fc" id="L286">            room3.setCapacity(3);</span>
<span class="fc" id="L287">            room3.setAvailable(true);</span>
<span class="fc" id="L288">            room3.setAmenities(&quot;WiFi,TV,Minibar,AC,Living Room&quot;);</span>
<span class="fc" id="L289">            room3.setImageUrl(&quot;https://images.unsplash.com/photo-1566665797739-1674de7a421a?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=80&quot;);</span>
<span class="fc" id="L290">            room3.setHotel(hotel);</span>
            
<span class="fc" id="L292">            roomRepository.saveAll(Arrays.asList(room1, room2, room3));</span>
            
<span class="nc" id="L294">        } catch (Exception e) {</span>
<span class="nc" id="L295">            logger.error(&quot;Error creating rooms for hotel {}: {}&quot;, hotel.getName(), e.getMessage());</span>
<span class="fc" id="L296">        }</span>
<span class="fc" id="L297">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>